# 第三部分：合作博弈：联盟的力量与价值分配

在前两部分中，我们深入探讨了**非合作博弈 (Non-cooperative Games)** 的世界。我们聚焦于个体理性决策者如何在规则明确的环境下，独立选择策略以最大化自身利益，并学习了纳什均衡及其精炼概念（如子博弈精炼纳什均衡、相关均衡、贝叶斯纳什均衡）来分析和预测这些互动的稳定结果。这些模型的核心假设是：**不存在具有约束力的协议**，或者说，任何协议的遵守都必须是参与者自愿的（即协议本身构成一个均衡）。

然而，现实世界充满了可以达成**具有约束力的协议 (binding agreements)** 的场景。想象一下：

* 几家公司决定合并，以获取更大的市场份额和协同效应。
* 多个政党组成执政联盟，共同推行政策纲领。
* 国家间签订贸易协定或环境条约，承诺遵守共同规则。
* 社区成员共同投资建设公共设施，并约定分摊成本。

在这些情境下，分析的焦点从个体的最优策略选择，转向了**群体的力量**：哪些**联盟 (coalitions)** 能够形成？这些联盟合作能创造多少**总价值 (total value)**？以及，最关键的是，这些价值应该如何在联盟成员之间进行**分配 (allocation/distribution)**，才能确保联盟的**稳定 (stability)** 或体现某种**公平 (fairness)**？

这就是**合作博弈理论 (Cooperative Game Theory)** 所要解答的核心问题。第三部分将带领你进入这个与非合作博弈视角截然不同的领域，探索其基本框架，并学习两个最重要的解概念：

* **核心 (Core)**：一个基于**稳定性**的解概念，关注哪些分配方案能让所有可能的联盟都无懈可击。
* **夏普利值 (Shapley Value)**：一个基于**公平性**原则的解概念，旨在为每个参与者分配其对合作的“应得”贡献。

准备好转换视角，从关注个体策略转向探索联盟合作的奥秘吧！

***

## 第5章：合作博弈基础：联盟价值与分配原则

### 学习目标：

* 深刻理解合作博弈与非合作博弈在**研究范式**上的根本区别。
* 熟练掌握合作博弈的数学语言：**特征函数形式 (Characteristic Function Form)**。
* 理解并能计算**核心 (Core)**，认识其作为**稳定性**解概念的意义和局限性。
* 理解**夏普利值 (Shapley Value)** 的**公理化基础**和**边际贡献思想**，掌握其计算方法。
* 能够运用核心和夏普利值分析现实中的**联盟形成、资源共享、成本分摊**等问题。

### 5.1 合作博弈：从个体策略到联盟价值

**范式之变：关注整体而非部分**

合作博弈理论标志着一个重要的**范式转变 (paradigm shift)**。与非合作博弈不同，它不再细致刻画每个参与者的具体行动选项 (如“定价高”或“定价低”，“进攻”或“防守”)，而是直接关注**结果**：**任何一个参与者群体（联盟）如果决定仅仅依靠内部成员进行合作，他们作为一个整体最多能确保获得多少总收益？**

这个转变带来了几个关键特征：

1. **分析单元是“联盟”**：合作博弈的基本分析单元是**联盟 (Coalition)**，即参与者的任意子集。我们关心的是每个潜在联盟的力量或其能创造的价值。
2. **假设存在“约束力”**：合作博弈理论假设，一旦联盟成员同意了某种合作方式或分配方案，这个协议就是**有约束力的**。成员不能随意单方面违背承诺（这可以通过法律合同、声誉损失、抵押品等现实机制保证）。这与非合作博弈中只有均衡策略才是“自我约束”的形成鲜明对比。
3. **核心问题是“分配”**：给定每个联盟能产生的价值，合作博弈的核心问题是如何将**大联盟 (grand coalition)**（即所有参与者组成的联盟）所创造的总价值在所有成员间进行分配。分配方案需要满足一定的合理性要求，如稳定性或公平性。

**数学表示：特征函数 (Characteristic Function)**

描述合作博弈的标准工具是**特征函数形式 (characteristic function form)**。

* 设 $N = {1, 2, ..., n}$ 是所有 $n$ 个参与者的集合，称为**大联盟**。
* $N$ 的任何一个子集 $S \subseteq N$ 称为一个**联盟**。$2^N$ 表示所有可能联盟的集合（包括空集 $\emptyset$ 和大联盟 $N$）。
* **特征函数** $v: 2^N \to \mathbb{R}$ 是一个函数，它为每一个可能的联盟 $S$ 指定一个实数值 $v(S)$，代表**联盟 $S$ 的成员通过内部合作所能确保得到的最低总收益（或称为联盟的价值、力量）**。
* 按照惯例，$v(\emptyset) = 0$。

整个合作博弈可以用一个序对 $(N, v)$ 来表示。

**理解 $v(S)$ 的含义**：\
$v(S)$ 不是联盟 $S$ 在某种特定场景下的实际收益，而是该联盟在**最不利情况**下（即 $S$ 外部的参与者可能采取最不利于 $S$ 的行动）所能**自我保证**的最低总收益。它代表了联盟 $S$ 的“独立价值”或“谈判底线”。

**示例 1：简单多数决 (修订版)**\
三个投票者 $N = {1, 2, 3}$ 决定一项提案。提案通过需要至少两人同意。通过提案的总收益为 1，否则为 0。联盟的价值在于其是否有能力**单独**通过提案。

* $v(\emptyset) = 0$
* $v({1}) = v({2}) = v({3}) = 0$ (单个人无法通过)
* $v({1,2}) = v({1,3}) = v({2,3}) = 1$ (任意两人联盟足以通过提案，确保获得收益1)
* $v(N) = v({1,2,3}) = 1$ (三人联盟当然也能通过)

**示例 2：手套市场 (Glove Market)**\
假设有 $n$ 个参与者。其中一部分人只有**左手手套 (L)**，另一部分人只有**右手手套 (R)**。一双匹配的手套可以卖 1 元，单个手套价值为 0。\
考虑一个联盟 $S$。设 $l(S)$ 为 $S$ 中左手套的数量，$r(S)$ 为 $S$ 中右手套的数量。联盟 $S$ 内部可以自行匹配的手套数量为 $\min{l(S), r(S)}$。因此，特征函数为：\
$v(S) = \min{l(S), r(S)}$

例如， $N = {1\_L, 2\_L, 3\_R}$。

* $v({1\_L}) = 0$, $v({3\_R}) = 0$
* $v({1\_L, 2\_L}) = 0$
* $v({1\_L, 3\_R}) = \min{1, 1} = 1$
* $v({1\_L, 2\_L, 3\_R}) = \min{2, 1} = 1$

**联盟价值的性质：超可加性 (Superadditivity)**

一个常见的、符合直觉的性质是**超可加性**：对于任意两个不相交的联盟 $S, T \subseteq N$ ($S \cap T = \emptyset$)，都有：$$v(S \cup T) \geq v(S) + v(T)$$\
这表示**合作通常能带来协同效应 (synergy)**：两个联盟合并后的总价值，至少不低于它们分开各自独立获取的价值之和。如果 $v(S \cup T) > v(S) + v(T)$，则说明合并产生了**严格的**效率提升。

* 简单多数决博弈是超可加的（例如 $v({1,2}) = 1 \ge v({1}) + v({2}) = 0+0$）。
* 手套市场博弈也是超可加的。
* 大多数经济和商业合作场景都具有超可加性。

虽然超可加性很常见，但并非所有合作博弈都满足。例如，在**成本分摊博弈**中，特征函数 $c(S)$ 可能表示联盟 $S$ 需要承担的**最小总成本**，这时可能出现**子可加性 (subadditivity)**，$c(S \cup T) \le c(S) + c(T)$，表示合并可能带来规模经济，降低总成本。

本章主要关注收益型博弈，并通常假定其满足超可加性，这意味着大联盟 $N$ 的形成在效率上是可取的：$v(N) \ge \sum\_{i \in N} v({i})$。

### 5.2 解概念之一：核心 (The Core) - 寻求稳定的分配

一旦我们知道了每个联盟能创造多少价值，接下来的核心问题就是：大联盟 $N$ 产生的总价值 $v(N)$ 应该如何在 $n$ 个参与者之间分配？我们用一个**分配向量 (allocation vector)** $x = (x\_1, x\_2, ..., x\_n)$ 来表示，其中 $x\_i$ 是分配给参与者 $i$ 的收益。

什么样的分配才是“好”的分配呢？**核心 (Core)** 提供了一个基于**稳定性 (stability)** 的答案。

**核心的直觉：无人能“造反”成功**

核心的思想是：一个分配方案 $x$ 如果是稳定的，那么**任何一个**可能的联盟 $S$ 都不应该有动机**脱离 (secede)** 大联盟 $N$ 并自行合作。

一个联盟 $S$ 何时会有动机脱离？当且仅当，如果 $S$ 的成员仅仅依靠他们自己合作，能够获得的总收益 $v(S)$ **严格大于**他们在当前分配方案 $x$ 下得到的总收益 $\sum\_{i \in S} x\_i$。如果这种情况发生，联盟 $S$ 的成员就可以通过重新分配 $v(S)$ 使得**每个** $S$ 中的成员都比原来在 $x$ 下分得的更多，从而有充分理由脱离。

核心正是所有**能够抵制住所有潜在联盟“造反”诱惑**的分配方案的集合。

**核心的正式定义**

合作博弈 $(N, v)$ 的**核心 (Core)** 是所有满足以下两个条件的分配向量 $x = (x\_1, ..., x\_n)$ 的集合：

1. **集体理性 / 效率性 (Group Rationality / Efficiency)**：   $$\sum_{i \in N} x_i = v(N)$$   \
   这意味着大联盟 $N$ 创造的总价值必须被**完全分配**掉，不多也不少。
2. **联盟理性 (Coalition Rationality)**：   \
   对于**所有**可能的联盟 $S \subseteq N$ (包括单人联盟 ${i}$ 和大联盟 $N$ 本身)，都必须满足：   $$\sum_{i \in S} x_i \geq v(S)$$   \
   这意味着分配给任何联盟 $S$ 的总收益，必须**至少**等于该联盟单干所能确保获得的价值。

特别地，对于单人联盟 $S={i}$，联盟理性要求 $x\_i \ge v({i})$，这称为**个体理性 (Individual Rationality)**，即每个参与者得到的分配至少不低于他单独行动能获得的收益。集体理性保证了 $\sum\_{i \in N} x\_i \ge v(N)$，所以我们只需对所有**真子集 (proper subset)** $S \subset N$ 检查联盟理性即可。

**核心的数学表示**：$$Core(N, v) = \left\{ x \in \mathbb{R}^n \mid \sum_{i \in N} x_i = v(N) \text{ and } \sum_{i \in S} x_i \geq v(S) \text{ for all } S \subseteq N \right\}$$

**核心的求解：解线性不等式组**

求解核心的过程，本质上是求解一个由一个等式（集体理性）和 $2^n - 1$ 个不等式（所有非空联盟的联盟理性）构成的**线性规划可行域**。

**示例 2 再探：手套市场 $N = {1\_L, 2\_L, 3\_R}$**

* $v({1\_L}) = 0, v({2\_L}) = 0, v({3\_R}) = 0$
* $v({1\_L, 2\_L}) = 0$
* $v({1\_L, 3\_R}) = 1$
* $v({2\_L, 3\_R}) = 1$
* $v(N) = v({1\_L, 2\_L, 3\_R}) = 1$

核心的约束条件为：

1. $x\_1 + x\_2 + x\_3 = 1$ (集体理性)
2. $x\_1 \ge 0, x\_2 \ge 0, x\_3 \ge 0$ (个体理性)
3. $x\_1 + x\_2 \ge 0$ (联盟 ${1\_L, 2\_L}$ 理性，自动满足)
4. $x\_1 + x\_3 \ge 1$ (联盟 ${1\_L, 3\_R}$ 理性)
5. $x\_2 + x\_3 \ge 1$ (联盟 ${2\_L, 3\_R}$ 理性)

结合 $x\_1+x\_2+x\_3=1$ 和 $x\_1+x\_3 \ge 1$，可得 $x\_2 \le 0$。又因为 $x\_2 \ge 0$，所以必有 $x\_2 = 0$。\
同理，结合 $x\_1+x\_2+x\_3=1$ 和 $x\_2+x\_3 \ge 1$，可得 $x\_1 \le 0$。又因为 $x\_1 \ge 0$，所以必有 $x\_1 = 0$。\
将 $x\_1=0, x\_2=0$ 代入 $x\_1+x\_2+x\_3=1$，得到 $x\_3 = 1$。

因此，这个博弈的核心是**唯一的**分配方案：$x = (0, 0, 1)$。\
直观解释：在这个市场中，唯一拥有稀缺资源（右手套）的参与者 3 拥有所有的议价能力，可以攫取全部合作收益。两个左手套持有者之间相互竞争，无法获得正收益。这个结果非常稳定，因为没有任何其他联盟能通过脱离获得更多。

**核心的性质与问题**

1. **核心可能是空的 (Empty Core)**：并非所有合作博弈都有核心。如果某些小联盟相对而言“过于强大”（即 $v(S)$ 很大），可能无法找到一个满足所有联盟理性条件的分配方案。
   * **例子：简单多数决博弈**。我们在 Part 3\_raw.md 中已经证明过，对于 $v({1,2})=v({1,3})=v({2,3})=v(N)=1$ 的情况，核心条件 $x\_1+x\_2+x\_3=1, x\_1+x\_2\ge 1, x\_1+x\_3\ge 1, x\_2+x\_3\ge 1$ 相互矛盾，因此 $Core(N,v) = \emptyset$。这反映了多数决博弈内在的不稳定性：总有失败者联盟想推翻现有分配。
2. **核心可能包含多个点（甚至无限多个）**：当核心非空时，它通常包含一系列满足稳定性条件的分配方案。
   * **例子：玩具生产 (来自 Part 3\_raw.md)**     \
     $N={1,2,3}$, $v({1})=20, v({2})=0, v({3})=10, v({1,2})=40, v({1,3})=20, v({2,3})=10, v(N)=100$.     \
     核心由 $x\_1+x\_2+x\_3=100$ 及 $x\_1\ge 20, x\_2\ge 0, x\_3\ge 10, x\_1+x\_2\ge 40, x\_1+x\_3\ge 20, x\_2+x\_3\ge 10$ 定义。     \
     例如，$x=(50, 30, 20)$ 在核心内 ($50+30+20=100$; $50\ge 20, 30\ge 0, 20\ge 10$; $50+30=80\ge 40$; $50+20=70\ge 20$; $30+20=50\ge 10$)。     \
     $x=(60, 20, 20)$ 也在核心内。     \
     $x=(45, 28.33, 26.67)$ （后面会算出的夏普利值）可能也在核心内（需要验证所有联盟理性）。     \
     核心是三维空间中的一个**凸多面体 (convex polytope)**。
3. **核心的优点与缺点**：
   * **优点**：概念直观，强调了分配方案必须具备的基本稳定性，排除了那些明显会被小团体推翻的方案。
   * **缺点**：可能为空，使得在某些博弈中无法提供任何稳定的分配建议；即使非空，也可能包含太多可能性，没有指明哪个分配是“最好”或“最公平”的；计算可能随着参与者数量增加而变得复杂（需要检查 $2^n$ 个联盟）。

**核心非空的条件：凸博弈 (Convex Games)**\
虽然核心可能为空，但有一类重要的博弈保证核心非空：**凸博弈 (Convex Games)**。\
一个博弈 $(N, v)$ 被称为凸博弈，如果其特征函数满足：$$v(S) + v(T) \leq v(S \cup T) + v(S \cap T) \quad \text{对所有 } S, T \subseteq N$$\
这个条件有时被称为**超模性 (supermodularity)**。它比超可加性更强。直观含义是：**参与者加入联盟的边际贡献是递增的**。也就是说，一个参与者加入一个更大的联盟所带来的价值增量，要比他加入一个较小联盟所带来的价值增量更大。这体现了越来越强的“规模报酬递增”或“协同效应”。

**定理 (Shapley, 1971)**：任何凸博弈的核心都是非空的。

玩具生产博弈是凸博弈（如 Part 3\_raw.md 中验证 $v({1,2}) + v({1,3}) \le v({1,2,3}) + v({1})$），因此它的核心非空。手套市场博弈也是凸博弈。

### 5.3 解概念之二：夏普利值 (The Shapley Value) - 追求公平的分配

核心关注的是分配的稳定性，但它可能给出很多个解，或者在某些情况下无解。此外，核心并没有直接回答“哪个分配最公平？”的问题。**夏普利值 (Shapley Value)**，由另一位诺贝尔奖得主劳埃德·夏普利 (Lloyd Shapley) 提出，正是为了提供一个**唯一**的、基于**公平性原则**的分配方案。

**夏普利值的核心思想：按平均边际贡献分配**

夏普利值认为，一个参与者 $i$ 在合作中应该获得的收益，应该等于他加入联盟时**平均**能带来的**边际贡献 (marginal contribution)**。

想象一下参与者们是按照某种**随机顺序**逐个加入，最终形成大联盟 $N$ 的。当参与者 $i$ 加入时，他发现已经有某个联盟 $S$（不包含 $i$）形成了。此时 $i$ 的加入使得联盟从 $S$ 扩大到 $S \cup {i}$，带来的价值增量是 $v(S \cup {i}) - v(S)$。这就是 $i$ 在这个特定时刻的边际贡献。

夏普利值就是计算 $i$ 在**所有可能**的加入顺序（共 $n!$ 种）下，其边际贡献的**期望值**（假设所有顺序等概率发生）。

**夏普利值的计算公式**

参与者 $i$ 的夏普利值 $\phi\_i(v)$ 计算公式为：$$\phi_i(v) = \sum_{S \subseteq N \setminus \{i\}} \frac{|S|! (n - |S| - 1)!}{n!} [v(S \cup \{i\}) - v(S)]$$\
这里：

* 求和遍历所有**不包含** $i$ 的联盟 $S$。
* $|S|$ 是联盟 $S$ 的大小（成员数量）。
* $n$ 是总参与者数量。
* $v(S \cup {i}) - v(S)$ 是 $i$ 加入联盟 $S$ 时的边际贡献。
* 分数 $\frac{|S|! (n - |S| - 1)!}{n!}$ 代表的是：在一个随机的参与者排列中，恰好前 $|S|$ 个是 $S$ 中的成员，第 $|S|+1$ 个是 $i$ 的概率。它等于 $S$ 中成员的排列方式数 ($|S|!$) 乘以 $N \setminus (S \cup {i})$ 中成员的排列方式数 ($(n-|S|-1)!$)，再除以总排列数 ($n!$)。

**计算夏普利值的实用方法：边际贡献列表法**

直接使用公式可能比较繁琐。一个更直观的方法是：

1. 列出所有 $n!$ 种可能的参与者加入顺序（排列）。
2. 对于每一种顺序，依次计算每个参与者加入时所带来的边际贡献。
3. 将每种顺序下的边际贡献向量记录下来。
4. 计算每个参与者在所有 $n!$ 种顺序下的总边际贡献，然后除以 $n!$ 得到平均值，即夏普利值。

**示例：玩具生产 $N={1,2,3}$ 的夏普利值计算**\
(计算过程同 Part 3\_raw.md，这里重新整理格式并强调结果)

总共有 $3! = 6$ 种加入顺序。计算每个顺序下 $(1, 2, 3)$ 的边际贡献向量：

* $1, 2, 3$: $v({1})-v(\emptyset)=20$; $v({1,2})-v({1})=40-20=20$; $v(N)-v({1,2})=100-40=60$. 贡献: $(20, 20, 60)$
* $1, 3, 2$: $v({1})=20$; $v({1,3})-v({1})=20-20=0$; $v(N)-v({1,3})=100-20=80$. 贡献: $(20, 80, 0)$ _(修正原始稿计算错误)_
* $2, 1, 3$: $v({2})=0$; $v({1,2})-v({2})=40-0=40$; $v(N)-v({1,2})=100-40=60$. 贡献: $(40, 0, 60)$
* $2, 3, 1$: $v({2})=0$; $v({2,3})-v({2})=10-0=10$; $v(N)-v({2,3})=100-10=90$. 贡献: $(90, 0, 10)$
* $3, 1, 2$: $v({3})=10$; $v({1,3})-v({3})=20-10=10$; $v(N)-v({1,3})=100-20=80$. 贡献: $(10, 80, 10)$ _(修正原始稿计算错误)_
* $3, 2, 1$: $v({3})=10$; $v({2,3})-v({3})=10-10=0$; $v(N)-v({2,3})=100-10=90$. 贡献: $(90, 0, 10)$

将每个参与者的贡献相加：

* 参与者 1 (木匠) 总贡献: $20 + 20 + 40 + 90 + 10 + 90 = 270$
* 参与者 2 (画家) 总贡献: $20 + 80 + 0 + 0 + 80 + 0 = 180$ _(修正)_
* 参与者 3 (销售) 总贡献: $60 + 0 + 60 + 10 + 10 + 10 = 150$ _(修正)_

总和检查: $270+180+150 = 600$. 总排列数 $n!=6$. 大联盟总价值 $v(N)=100$. $6 \times 100 = 600$. 一致。

计算夏普利值：

* $\phi\_1(v) = 270 / 6 = 45$
* $\phi\_2(v) = 180 / 6 = 30$ _(修正)_
* $\phi\_3(v) = 150 / 6 = 25$ _(修正)_

所以，夏普利值分配为 $x = (45, 30, 25)$。这个分配反映了木匠(1)的贡献最大，其次是画家(2)，最后是销售(3)。

**夏普利值的公理化基础 (Axiomatic Foundation)**

夏普利证明了，夏普利值是**唯一**满足以下四条看起来非常合理的“公平性”公理的分配方法 $\phi(v) = (\phi\_1(v), ..., \phi\_n(v))$：

1. **效率性 (Efficiency)**：$\sum\_{i \in N} \phi\_i(v) = v(N)$. 分配的总额正好等于大联盟创造的总价值。
2. **对称性 (Symmetry)**：如果两个参与者 $i$ 和 $j$ 是**可互换的**（即对于任何不包含 $i$ 和 $j$ 的联盟 $S$，都有 $v(S \cup {i}) = v(S \cup {j})$），那么他们获得的分配应该相等：$\phi\_i(v) = \phi\_j(v)$。贡献相同的人应该得到相同报酬。
3. **虚拟人 (Dummy Player)**：如果一个参与者 $i$ 对于任何联盟 $S \subseteq N \setminus {i}$ 都没有贡献（即 $v(S \cup {i}) = v(S) + v({i})$），那么他只能获得他自己单独能创造的价值：$\phi\_i(v) = v({i})$。没有贡献的人不应从合作中额外获利。
4. **可加性 (Additivity)**：如果考虑两个独立的合作博弈 $(N, v)$ 和 $(N, w)$（发生在同一群参与者之间），那么将这两个博弈合并成一个新博弈 $(N, v+w)$（其中 $(v+w)(S) = v(S) + w(S)$），其夏普利值应该等于两个博弈夏普利值的和：$\phi\_i(v+w) = \phi\_i(v) + \phi\_i(w)$。这允许我们将复杂博弈分解为简单部分来分析。

这四条公理共同刻画了夏普利值所代表的“公平”概念。

**夏普利值的性质与核心的关系**

1. **存在且唯一**：对于任何特征函数形式的合作博弈 $(N, v)$，夏普利值总是**存在且唯一**的。即使核心为空，夏普利值也能提供一个确定的分配方案。
2. **满足个体理性**：夏普利值总是满足个体理性，即 $\phi\_i(v) \ge v({i})$。
3. **不一定在核心内**：夏普利值**不一定**满足所有联盟的联盟理性。因此，夏普利值给出的分配方案**可能不在核心中**（如果核心存在的话）。这意味着夏普利值所代表的“公平”有时可能与“稳定”相冲突。如果一个联盟 $S$ 发现 $\sum\_{i \in S} \phi\_i(v) < v(S)$，那么按照夏普利值分配可能是不稳定的，因为联盟 $S$ 有动机脱离。
4. **在凸博弈中位于核心内**：一个重要的联系是，如果博弈是**凸博弈 (Convex Game)**，那么其夏普利值**一定位于核心之中**。在这种情况下，夏普利值既满足公平性公理，又满足稳定性要求。我们计算出的玩具生产博弈的夏普利值 $(45, 30, 25)$ 应该在核心内（读者可以自行验证它满足所有核心不等式）。

**核心 vs. 夏普利值：总结比较**

| 特性         | 核心 (Core)       | 夏普利值 (Shapley Value) |
| ---------- | --------------- | -------------------- |
| **目标**     | 稳定性 (Stability) | 公平性 (Fairness)       |
| **基础**     | 联盟理性 (无动机脱离)    | 平均边际贡献 / 公理化         |
| **解形式**    | 集合 (Set)        | 点 (Point) / 唯一向量     |
| **存在性**    | 可能为空            | 总是存在                 |
| **唯一性**    | 通常不唯一           | 总是唯一                 |
| **计算**     | 解线性不等式组         | 计算边际贡献 / 排列          |
| **是否在核心内** | 定义本身            | 不一定（除非是凸博弈）          |
| **主要优点**   | 捕捉稳定性要求         | 提供唯一、公平的分配建议         |
| **主要缺点**   | 可能无解或解集太大；计算复杂  | 可能不稳定（不在核心内）；计算也可能复杂 |

### 5.4 其他合作博弈解概念简介

除了核心和夏普利值，合作博弈理论还发展了其他一些重要的解概念，它们从不同角度提供了对收益分配的理解：

1. **核仁 (Nucleolus)**：试图找到“最公平”的分配，这里的公平是指**最小化所有联盟中“最不满意”的那个联盟的不满程度**（不满程度通常定义为 $v(S) - \sum\_{i \in S} x\_i$）。核仁总是存在且唯一的，并且如果核心非空，核仁一定在核心内部，通常位于核心的“中心”位置。
2. **讨价还价集 (Bargaining Set)**：基于更复杂的“反对 (objection)”和“反反对 (counter-objection)”逻辑。一个分配如果在讨价还价集中，意味着对于任何想要脱离的联盟（反对者），其内部成员无法就如何分配脱离后的收益达成一致，或者被反对者中的某人可以被大联盟中的其他人以更好的方式拉拢回来（反反对）。讨价还价集通常比核心更大，并且总是非空的。
3. **稳定集 (Stable Set / von Neumann-Morgenstern Solution)**：基于“支配 (domination)”关系定义。一个稳定集是一个分配集合，满足两个条件：(1) 集合内部的任何分配都不相互支配；(2) 集合外部的任何分配都至少被集合内部的一个分配所支配。稳定集可能不存在，也可能存在多个，且求解困难，现在较少使用。

这些不同的解概念为分析复杂的合作问题提供了多样化的工具箱。

### 本章小结与练习

**小结**：\
本章我们开启了合作博弈理论的大门，学习了其区别于非合作博弈的**核心范式**：关注联盟的形成、联盟能创造的**价值 (特征函数 $v(S)$)**，以及如何在大联盟成员间**分配**这些价值。我们深入探讨了两个最重要的解概念：

* **核心 (Core)**：基于**稳定性**，要求分配方案能抵御所有潜在联盟的“脱离”诱惑 ($\sum x\_i = v(N), \sum\_{i \in S} x\_i \ge v(S)$)。核心可能为空或包含多个解。
* **夏普利值 (Shapley Value)**：基于**公平性**（平均边际贡献和公理化定义），为每个博弈提供**唯一**的分配方案 ($\phi\_i(v) = E\[v(S\cup{i}) - v(S)]$)。夏普利值总存在且唯一，但可能不在核心内（除非是凸博弈）。

我们掌握了核心（解线性不等式组）和夏普利值（计算平均边际贡献）的基本求解方法，并通过实例理解了它们的应用和性质。合作博弈理论为理解现实中的联盟、合资、成本分摊、资源分配等问题提供了强大的分析框架。

**练习**：

1. **机场跑道费用分担**：   \
   三家航空公司共享一条机场跑道。它们需要的跑道长度分别是：小型航空公司(1)需要1000米，中型航空公司(2)需要1500米，大型航空公司(3)需要2000米。建造长度为1000米的跑道成本是5000万元，1500米的成本是7000万元，2000米的成本是8000万元。   \
   (a) 将这个问题建模为一个成本分担博弈（注意在成本博弈中，$c(S)$表示联盟$S$必须支付的最小成本）。   \
   (b) 计算这个博弈的核心。是否存在公平的成本分担方案使得所有联盟都没有分离的动机？   \
   (c) 计算这个博弈的夏普利值。解释为什么这个分配方案合理。
2. **投票权重与权力指数**：   \
   一个委员会有3个成员，他们的投票权重分别是3、2、1。通过提案需要总权重超过一半，即至少4票。   \
   (a) 将这个情况建模为特征函数形式的合作博弈。   \
   (b) 这个博弈的核心是什么？解释结果。   \
   (c) 计算夏普利值。夏普利值能否反映各成员的实际"权力"？与其名义权重相比有何差异？
3. **销售网络**：   \
   四个零售商{1,2,3,4}考虑组建联合销售网络。各种可能的联盟能产生的利润如下：
   * 单个零售商：$v({i}) = 10$（对所有$i$）
   * 两个零售商：$v({i,j}) = 25$（对所有$i \neq j$）
   * 三个零售商：$v({i,j,k}) = 45$（对所有不同的$i,j,k$）
   * 全部四个：$v(N) = 100$     \
     (a) 这个博弈是否满足超可加性？是否是凸博弈？     \
     (b) 求解核心（或证明核心为空）。     \
     (c) 计算参与者1的夏普利值。
4. **研发联盟**：   \
   三家公司考虑合作开发一项新技术。如果公司$i$单独研发，预期利润为$v({i})$。如果多家公司合作，可以共享研发成本并扩大市场，增加总利润。具体数值如下：
   * $v({1}) = 10$, $v({2}) = 15$, $v({3}) = 20$
   * $v({1,2}) = 40$, $v({1,3}) = 50$, $v({2,3}) = 45$
   * $v(N) = 90$     \
     (a) 这个博弈是否满足超可加性？求证或反证。     \
     (b) 计算这个博弈的核心。大联盟的形成是否稳定？     \
     (c) 计算夏普利值并与核心比较。在这个案例中，你认为哪种分配方案更好？为什么？
5. **【挑战题】国际环境协议**：   \
   五个国家考虑签署减排协议以减轻全球变暖。每个国家可以选择减排或不减排。减排有成本但也有全球收益。具体数据如下：
   * 每个国家减排的成本是10个单位。
   * 每个国家减排会为全球（包括自己）带来每国3个单位的收益。例如，如果3个国家减排，全球总收益为$3 \times 5 \times 3 = 45$个单位（3个减排国家×5个国家×每国3个单位）。
   * 每个联盟$S$的净收益$v(S)$是：该联盟成员减排带来的全球总收益，减去联盟成员的减排成本，再减去非联盟成员减排（如果有利可图）带来的全球总收益在联盟内的份额。假设非联盟成员只有在减排对自己有利时才会减排。     \
     (a) 计算这个博弈中各种联盟的特征函数值$v(S)$。     \
     (b) 大联盟$N$的形成是否能带来最大的全球净收益？     \
     (c) 这个博弈的核心是否为空？如果为空，解释为什么这反映了国际环境协议的现实困境。

**第三部分总结**

在第三部分，我们聚焦于合作博弈，探索了当参与者可以形成具有约束力的联盟时，如何分析联盟的价值以及如何公平、稳定地分配合作产生的收益。通过学习特征函数、核心和夏普利值等核心概念与工具，我们现在能够：

* 量化不同联盟合作的潜力 ($v(S)$)。
* 评估一个分配方案是否足够稳定以防止联盟破裂 (Core)。
* 基于参与者的贡献给出一个公平的、唯一的分配建议 (Shapley Value)。

这些工具在经济学（如市场设计、成本分摊）、政治学（如联盟组建、投票权分析）、商业管理（如供应链合作、合资企业利润分配）以及社会科学等多个领域都有广泛的应用。

通过结合前两部分学习的非合作博弈理论（关注个体策略互动和均衡）与本部分学习的合作博弈理论（关注联盟价值和收益分配），我们构建了一个更全面的博弈论分析框架，能够更好地理解和应对现实世界中复杂多样的策略互动与合作情境。
